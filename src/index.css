@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Theme variables ── */
@layer base {
  :root {
    --primary: 200 65% 16%;
    --primary-foreground: 0 0% 100%;
    --secondary: 200 65% 20%;
    --secondary-foreground: 0 0% 100%;
    --accent: 200 65% 16%;
    --accent-foreground: 0 0% 100%;
    --highlight: 202 100% 73%;

    --background: 210 20% 98%;
    --foreground: 200 65% 16%;
    --card: 0 0% 100%;
    --card-foreground: 200 65% 16%;
    --popover: 0 0% 100%;
    --popover-foreground: 200 65% 16%;
    --muted: 200 20% 96%;
    --muted-foreground: 200 20% 40%;
    --border: 200 20% 90%;
    --input: 200 20% 90%;
    --ring: 200 65% 16%;
    --radius: 0.75rem;

    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;

    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;

    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    --primary: 199 90% 70%;
    --primary-foreground: 200 65% 10%;
    --secondary: 199 80% 65%;
    --secondary-foreground: 200 65% 10%;
    --accent: 199 90% 70%;
    --accent-foreground: 200 65% 10%;
    --highlight: 202 100% 73%;

    --background: 220 20% 10%;
    --foreground: 210 20% 90%;
    --card: 220 18% 13%;
    --card-foreground: 210 20% 90%;
    --popover: 220 18% 13%;
    --popover-foreground: 210 20% 90%;
    --muted: 220 15% 18%;
    --muted-foreground: 210 15% 60%;
    --border: 220 15% 22%;
    --input: 220 15% 22%;
    --ring: 199 90% 60%;
    --radius: 0.75rem;

    --destructive: 0 72% 55%;
    --destructive-foreground: 0 0% 100%;

    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 50%;
    --chart-3: 197 60% 60%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;

    --sidebar-background: 220 18% 11%;
    --sidebar-foreground: 210 20% 85%;
    --sidebar-primary: 199 90% 70%;
    --sidebar-primary-foreground: 200 65% 10%;
    --sidebar-accent: 220 15% 18%;
    --sidebar-accent-foreground: 210 20% 85%;
    --sidebar-border: 220 15% 22%;
    --sidebar-ring: 199 90% 60%;
  }

  * {
    @apply border-border outline-ring/50;
    font-family: 'Poppins', sans-serif;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Poppins', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

/* ── Scrollbar: prevent layout shift ── */
html {
  overflow-y: scroll;
  scrollbar-gutter: stable;
}

/* Fix scrollbar disappearing when Radix dialogs/popovers open */
body[data-scroll-locked] {
  overflow: scroll !important;
  padding-right: 0px !important;
  margin-right: 0px !important;
}

/* Also prevent the fixed overlay from inheriting shift */
[data-radix-popper-content-wrapper] {
  margin-right: 0px !important;
}

[data-radix-scroll-area-viewport] {
  scrollbar-width: thin;
}

/* ── Custom scrollbar ── */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--muted));
  border-radius: 3px;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--ring));
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--foreground) / 0.4);
}

/* Subtle scrollbar for embedded widgets */
.custom-scrollbar::-webkit-scrollbar {
  width: 4px;
}
.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}
.custom-scrollbar::-webkit-scrollbar-thumb {
  background: hsl(var(--ring) / 0.2);
  border-radius: 2px;
}
.custom-scrollbar::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--ring) / 0.4);
}
.custom-scrollbar {
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--ring) / 0.2) transparent;
}

/* ── Utility tokens ── */
@layer utilities {
  .shadow-card {
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.04), 0 1px 2px -1px rgb(0 0 0 / 0.04);
  }
  .shadow-card-hover {
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.06), 0 4px 6px -4px rgb(0 0 0 / 0.04);
  }
  .shadow-card-lg {
    box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.05), 0 8px 10px -6px rgb(0 0 0 / 0.04);
  }
  /* Touch manipulation - prevents 300ms delay */
  .touch-manipulation {
    touch-action: manipulation;
  }
}

/* ── Smooth transitions ── */
a, button {
  transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

/* ── Mobile: safe areas for notch/home indicator ── */
@supports (padding: env(safe-area-inset-bottom)) {
  .pb-safe {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }
  .pt-safe {
    padding-top: env(safe-area-inset-top, 0px);
  }
}

/* ── Mobile bottom nav spacing ── */
@media (max-width: 1023px) {
  main {
    padding-bottom: 80px; /* space for bottom nav + safe area */
  }
}

/* ── Touch targets: ensure min 44px on touch devices ── */
@media (pointer: coarse) {
  /* Only apply min-height to specific interactive elements, not all buttons */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }
}

/* ── PWA: disable pull-to-refresh on overscroll ── */
html {
  overscroll-behavior-y: contain;
}

/* ── PWA standalone mode adjustments ── */
@media (display-mode: standalone) {
  /* Extra top padding for standalone PWA (no browser chrome) */
  header {
    padding-top: env(safe-area-inset-top, 0px);
  }

  /* Make bottom nav respect home indicator */
  nav.pb-safe {
    padding-bottom: max(env(safe-area-inset-bottom, 0px), 8px);
  }
}

/* ── Mobile: horizontal scroll containers ── */
.scrollbar-thin::-webkit-scrollbar {
  height: 3px;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 3px;
}

/* ── Focus visible for keyboard navigation ── */
*:focus-visible {
  outline: 2px solid #0069AF;
  outline-offset: 2px;
  border-radius: 4px;
}

/* ── Prevent text selection on interactive elements (mobile) ── */
@media (pointer: coarse) {
  button, a, [role="button"] {
    -webkit-user-select: none;
    user-select: none;
  }
}

/* ── Progress bar shimmer ── */
@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(300%); }
}

/* ══════════════════════════════════════════════════════════
   DARK MODE OVERRIDES
   Remap the most common hardcoded Tailwind classes to dark-friendly
   values when .dark is on <html>. This avoids editing 40+ page files.
   ══════════════════════════════════════════════════════════ */

/* ── Backgrounds ── */
.dark .bg-white { background-color: hsl(var(--card)) !important; }
.dark .bg-slate-50 { background-color: hsl(var(--background)) !important; }
.dark .bg-slate-100 { background-color: hsl(var(--muted)) !important; }
.dark .bg-slate-200 { background-color: hsl(220 15% 22%) !important; }
.dark .bg-gray-50 { background-color: hsl(var(--background)) !important; }
.dark .bg-gray-100 { background-color: hsl(var(--muted)) !important; }

/* Status badge backgrounds — soften for dark */
.dark .bg-blue-50 { background-color: hsl(210 80% 20% / 0.3) !important; }
.dark .bg-blue-100 { background-color: hsl(210 80% 25% / 0.3) !important; }
.dark .bg-green-50 { background-color: hsl(140 60% 20% / 0.3) !important; }
.dark .bg-green-100 { background-color: hsl(140 60% 25% / 0.3) !important; }
.dark .bg-emerald-50 { background-color: hsl(160 60% 20% / 0.3) !important; }
.dark .bg-emerald-100 { background-color: hsl(160 60% 25% / 0.3) !important; }
.dark .bg-red-50 { background-color: hsl(0 60% 20% / 0.3) !important; }
.dark .bg-red-100 { background-color: hsl(0 60% 25% / 0.3) !important; }
.dark .bg-amber-50 { background-color: hsl(40 60% 20% / 0.3) !important; }
.dark .bg-amber-100 { background-color: hsl(40 60% 25% / 0.3) !important; }
.dark .bg-yellow-50 { background-color: hsl(50 60% 20% / 0.3) !important; }
.dark .bg-yellow-100 { background-color: hsl(50 60% 25% / 0.3) !important; }
.dark .bg-orange-50 { background-color: hsl(25 60% 20% / 0.3) !important; }
.dark .bg-orange-100 { background-color: hsl(25 60% 25% / 0.3) !important; }
.dark .bg-purple-50 { background-color: hsl(270 60% 20% / 0.3) !important; }
.dark .bg-purple-100 { background-color: hsl(270 60% 25% / 0.3) !important; }
.dark .bg-violet-50 { background-color: hsl(260 60% 20% / 0.3) !important; }
.dark .bg-violet-100 { background-color: hsl(260 60% 25% / 0.3) !important; }
.dark .bg-indigo-50 { background-color: hsl(230 60% 20% / 0.3) !important; }
.dark .bg-indigo-100 { background-color: hsl(230 60% 25% / 0.3) !important; }
.dark .bg-cyan-50 { background-color: hsl(185 60% 20% / 0.3) !important; }
.dark .bg-cyan-100 { background-color: hsl(185 60% 25% / 0.3) !important; }
.dark .bg-teal-50 { background-color: hsl(170 60% 20% / 0.3) !important; }
.dark .bg-teal-100 { background-color: hsl(170 60% 25% / 0.3) !important; }
.dark .bg-pink-50 { background-color: hsl(330 60% 20% / 0.3) !important; }
.dark .bg-pink-100 { background-color: hsl(330 60% 25% / 0.3) !important; }
.dark .bg-rose-50 { background-color: hsl(350 60% 20% / 0.3) !important; }
.dark .bg-rose-100 { background-color: hsl(350 60% 25% / 0.3) !important; }

/* Gradient overrides */
.dark .from-slate-50 { --tw-gradient-from: hsl(var(--background)) !important; }
.dark .from-slate-100 { --tw-gradient-from: hsl(var(--muted)) !important; }
.dark .from-white { --tw-gradient-from: hsl(var(--card)) !important; }
.dark .via-white { --tw-gradient-via: hsl(var(--card)) !important; }
.dark .to-white { --tw-gradient-to: hsl(var(--card)) !important; }
.dark .from-indigo-50 { --tw-gradient-from: hsl(230 40% 15%) !important; }
.dark .from-blue-50 { --tw-gradient-from: hsl(210 40% 15%) !important; }
.dark .to-indigo-50\/30 { --tw-gradient-to: hsl(230 40% 15% / 0.3) !important; }
.dark .to-blue-50\/30 { --tw-gradient-to: hsl(210 40% 15% / 0.3) !important; }
.dark .to-purple-50\/30 { --tw-gradient-to: hsl(270 40% 15% / 0.3) !important; }
.dark .to-rose-50\/30 { --tw-gradient-to: hsl(350 40% 15% / 0.3) !important; }

/* ── Text colors ── */
.dark .text-slate-900 { color: hsl(210 20% 92%) !important; }
.dark .text-slate-800 { color: hsl(210 20% 86%) !important; }
.dark .text-slate-700 { color: hsl(210 15% 78%) !important; }
.dark .text-slate-600 { color: hsl(210 15% 68%) !important; }
.dark .text-slate-500 { color: hsl(210 10% 55%) !important; }
.dark .text-slate-400 { color: hsl(210 10% 45%) !important; }
.dark .text-slate-300 { color: hsl(210 10% 38%) !important; }
.dark .text-gray-900 { color: hsl(210 20% 92%) !important; }
.dark .text-gray-800 { color: hsl(210 20% 86%) !important; }
.dark .text-gray-700 { color: hsl(210 15% 78%) !important; }
.dark .text-gray-600 { color: hsl(210 15% 68%) !important; }
.dark .text-gray-500 { color: hsl(210 10% 55%) !important; }

/* ── Borders ── */
.dark .border-slate-100 { border-color: hsl(var(--border)) !important; }
.dark .border-slate-200 { border-color: hsl(var(--border)) !important; }
.dark .border-slate-300 { border-color: hsl(220 15% 28%) !important; }
.dark .border-gray-100 { border-color: hsl(var(--border)) !important; }
.dark .border-gray-200 { border-color: hsl(var(--border)) !important; }
.dark .border-gray-300 { border-color: hsl(220 15% 28%) !important; }

/* Colored borders for status badges */
.dark .border-blue-100, .dark .border-blue-200 { border-color: hsl(210 60% 30%) !important; }
.dark .border-green-100, .dark .border-green-200 { border-color: hsl(140 40% 30%) !important; }
.dark .border-emerald-100, .dark .border-emerald-200 { border-color: hsl(160 40% 30%) !important; }
.dark .border-red-100, .dark .border-red-200 { border-color: hsl(0 50% 30%) !important; }
.dark .border-amber-100, .dark .border-amber-200 { border-color: hsl(40 50% 30%) !important; }
.dark .border-yellow-100, .dark .border-yellow-200 { border-color: hsl(50 50% 30%) !important; }
.dark .border-orange-100, .dark .border-orange-200 { border-color: hsl(25 50% 30%) !important; }
.dark .border-purple-100, .dark .border-purple-200 { border-color: hsl(270 40% 30%) !important; }
.dark .border-indigo-100, .dark .border-indigo-200 { border-color: hsl(230 40% 30%) !important; }
.dark .border-pink-100, .dark .border-pink-200 { border-color: hsl(330 40% 30%) !important; }

/* ── Hover states ── */
.dark .hover\:bg-slate-50:hover { background-color: hsl(var(--muted)) !important; }
.dark .hover\:bg-slate-100:hover { background-color: hsl(220 15% 22%) !important; }
.dark .hover\:bg-gray-50:hover { background-color: hsl(var(--muted)) !important; }
.dark .hover\:bg-gray-100:hover { background-color: hsl(220 15% 22%) !important; }
.dark .hover\:bg-white:hover { background-color: hsl(var(--card)) !important; }

/* ── Divide colors ── */
.dark .divide-slate-100 > :not([hidden]) ~ :not([hidden]) { border-color: hsl(var(--border)) !important; }
.dark .divide-slate-200 > :not([hidden]) ~ :not([hidden]) { border-color: hsl(var(--border)) !important; }

/* ── Ring colors ── */
.dark .ring-slate-100 { --tw-ring-color: hsl(var(--border)) !important; }
.dark .ring-slate-200 { --tw-ring-color: hsl(var(--border)) !important; }

/* ── Shadow adjustments ── */
.dark .shadow-sm { box-shadow: 0 1px 2px 0 rgb(0 0 0 / 0.3) !important; }
.dark .shadow-md { box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.4), 0 2px 4px -2px rgb(0 0 0 / 0.3) !important; }
.dark .shadow-lg { box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.4), 0 4px 6px -4px rgb(0 0 0 / 0.3) !important; }
.dark .shadow-xl { box-shadow: 0 20px 25px -5px rgb(0 0 0 / 0.4), 0 8px 10px -6px rgb(0 0 0 / 0.3) !important; }

/* ── Placeholder text ── */
.dark .placeholder\:text-slate-400::placeholder { color: hsl(210 10% 40%) !important; }
.dark .placeholder\:text-slate-500::placeholder { color: hsl(210 10% 40%) !important; }

/* ── Focus ring ── */
.dark *:focus-visible {
  outline-color: hsl(199 90% 60%);
}

/* ── Scrollbar for dark mode ── */
.dark .scrollbar-thin::-webkit-scrollbar-thumb {
  background: hsl(210 10% 35%);
}

/* ── Transition for theme switch ── */
html.dark {
  color-scheme: dark;
}

/* Smooth theme transition */
html {
  transition: background-color 0.2s ease, color 0.2s ease;
}

/* ══════════════════════════════════════════════════════════
   DARK MODE: Brand color overrides
   #0F2F44, #133F5C, #0069AF are dark-blue brand colors
   used as text/bg/border. In dark mode they need to flip.
   ══════════════════════════════════════════════════════════ */

/* Text: dark-blue → light-blue in dark mode */
.dark .text-\[\#0F2F44\]  { color: hsl(199 60% 82%) !important; }
.dark .text-\[\#133F5C\]  { color: hsl(199 60% 82%) !important; }
.dark .text-\[\#0069AF\]  { color: hsl(199 80% 72%) !important; }

/* Text with opacity — lighter */
.dark .text-\[\#0F2F44\]\/70 { color: hsl(199 60% 75% / 0.8) !important; }
.dark .text-\[\#0F2F44\]\/60 { color: hsl(199 60% 70% / 0.7) !important; }
.dark .text-\[\#0F2F44\]\/50 { color: hsl(199 60% 65% / 0.6) !important; }
.dark .text-\[\#0F2F44\]\/40 { color: hsl(199 60% 60% / 0.5) !important; }
.dark .text-\[\#0F2F44\]\/30 { color: hsl(199 60% 55% / 0.4) !important; }

/* Backgrounds: dark-blue at low opacity → card-like tones */
.dark .bg-\[\#0F2F44\]\/5  { background-color: hsl(var(--muted)) !important; }
.dark .bg-\[\#0F2F44\]\/10 { background-color: hsl(220 15% 18%) !important; }
.dark .bg-\[\#0069AF\]\/5  { background-color: hsl(210 40% 18% / 0.3) !important; }
.dark .bg-\[\#0069AF\]\/10 { background-color: hsl(210 40% 22% / 0.4) !important; }
.dark .bg-\[\#0069AF\]\/20 { background-color: hsl(210 40% 25% / 0.4) !important; }

/* Solid brand backgrounds — keep vibrant but adjust for dark context */
.dark .bg-\[\#0F2F44\] { background-color: hsl(199 60% 72%) !important; }
.dark .bg-\[\#0F2F44\].text-white { color: hsl(220 20% 10%) !important; }
.dark .bg-\[\#133F5C\] { background-color: hsl(199 60% 68%) !important; }

/* Border overrides */
.dark .border-\[\#0F2F44\]\/10 { border-color: hsl(var(--border)) !important; }
.dark .border-\[\#0F2F44\]\/20 { border-color: hsl(220 15% 25%) !important; }
.dark .border-\[\#0F2F44\]\/30 { border-color: hsl(220 15% 28%) !important; }
.dark .border-\[\#0F2F44\]\/50 { border-color: hsl(220 15% 32%) !important; }
.dark .border-\[\#0069AF\]\/20 { border-color: hsl(210 50% 30%) !important; }
.dark .border-\[\#0069AF\]\/30 { border-color: hsl(210 50% 35%) !important; }
.dark .border-\[\#0069AF\]\/40 { border-color: hsl(210 50% 38%) !important; }

/* Hover overrides */
.dark .hover\:bg-\[\#0F2F44\]:hover { background-color: hsl(199 60% 65%) !important; }
.dark .hover\:bg-\[\#133F5C\]:hover { background-color: hsl(199 60% 60%) !important; }
.dark .hover\:bg-\[\#1a4a6e\]:hover { background-color: hsl(199 60% 65%) !important; }
.dark .hover\:text-\[\#133F5C\]:hover { color: hsl(199 60% 90%) !important; }
.dark .hover\:text-\[\#0F2F44\]:hover { color: hsl(199 60% 90%) !important; }
.dark .hover\:border-\[\#0F2F44\]\/20:hover { border-color: hsl(220 15% 30%) !important; }

/* Empty state gradient backgrounds */
.dark .bg-gradient-to-br.from-slate-50.to-indigo-50\/40 {
  background: hsl(var(--background)) !important;
}

/* Ring offset overrides for dark backgrounds */
.dark .ring-offset-white { --tw-ring-offset-color: hsl(var(--card)) !important; }
